<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel | Donations</title>
    <style>
    body { font-family: Arial; background: #111; color: #fff; padding: 20px; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 12px; border: 1px solid #444; text-align: center; }
    th { background: #ff4d4d; }
  </style>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- ================= HEADER ================= -->
<header class="main-header">
  <nav class="navbar">
    <div class="logo-box">
  <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Gully Classes Logo">
  <span>Gully Classes</span>
</div>

    <ul class="nav-links">
      <li><a href="{{ url_for('index') }}">Home</a></li>
      <li><a href="{{ url_for('about') }}">About</a></li>
      <li><a href="{{ url_for('services') }}">Services</a></li>
      <li><a href="{{ url_for('gallery') }}">Gallery</a></li>
      <li><a href="{{ url_for('contact') }}">Contact</a></li>
      <li><a href="{{ url_for('donate') }}" class="donate-btn-nav">Donate â¤ï¸</a></li>
    </ul>
  </nav>
</header>

<section class="admin-hero">
  <div class="admin-overlay"></div>

  <div class="admin-content">
    <h1>Welcome, Admin ğŸ‘‹</h1>
    <p>Manage your website from here</p>

    <div class="admin-cards">

      <div class="admin-card">
        <h3>ğŸ“© Messages</h3>
        <p>View contact form messages</p>
      </div>

      <div class="admin-card">
        <h3>ğŸ“Š Website</h3>
        <p>Monitor website activity</p>
      </div>

      <div class="admin-card">
        <h3>âš™ï¸ Settings</h3>
        <p>Update admin settings</p>
      </div>

    </div>

    <h1>ğŸ“© Contact Messages</h1>

<div class="table-container">
  <table class="messages-table" id="messagesTable">
    <thead>
      <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>messages</th>
      </tr>
    </thead>

    <tbody>
      {% for msg in messages %}
      <tr>
        <td>{{ msg[0] }}</td>
        <td>{{ msg[1] }}</td>
        <td>{{ msg[2] }}</td>
        <td>{{ msg[3] }}</td>
        
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<div class="search-box">
  <input
    type="text"
    id="searchInput"
    placeholder="Search by name or email..."
    onkeyup="searchMessages()"
  />
</div>

<br>
    <a href="{{ url_for('logout') }}" class="btn logout-btn">Logout</a>
  </div>
</section>

<script>
function searchMessages() {
  let input = document.getElementById("searchInput").value.toLowerCase();
  let table = document.getElementById("messagesTable");
  let rows = table.getElementsByTagName("tr");

  for (let i = 1; i < rows.length; i++) {
    let name = rows[i].getElementsByTagName("td")[1];
    let email = rows[i].getElementsByTagName("td")[2];

    if (name && email) {
      let nameText = name.textContent.toLowerCase();
      let emailText = email.textContent.toLowerCase();

      if (nameText.includes(input) || emailText.includes(input)) {
        rows[i].style.display = "";
      } else {
        rows[i].style.display = "none";
      }
    }
  }
}
</script>

<h1>ğŸ’° Donation Records</h1>

<table>
  <tr>
    <th>ID</th>
    <th>Name</th>
    <th>Email</th>
    <th>Amount (â‚¹)</th>
    <th>Payment</th>
    <th>Date</th>
  </tr>

  {% for d in donations %}
  <tr>
    <td>{{ d[0] }}</td>
    <td>{{ d[1] }}</td>
    <td>{{ d[2] }}</td>
    <td>{{ d[3] }}</td>
    <td>{{ d[4] }}</td>
    <td>{{ d[5] }}</td>
  </tr>
  {% endfor %}
</table>
</body>
</html>